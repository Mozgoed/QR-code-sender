# File to QR Code Sender

Приложение для передачи файлов через QR-коды.

## Требования

- Библиотека `qrcode.js` должна находиться в той же директории, что и `index.html`

## Как использовать

1. Откройте `index.html` в браузере
2. Выберите файл для отправки
3. Настройте параметры (опционально):
   - **Chunk size**: размер одного куска данных в байтах (по умолчанию 1000)
   - **Display interval**: интервал смены QR-кодов в миллисекундах (по умолчанию 2000)
   - **Error correction level**: уровень коррекции ошибок QR-кода (L/M/Q/H)
     - L (Low - 7%): максимальная емкость данных
     - M (Medium - 15%): баланс между емкостью и надежностью
     - Q (Quartile - 25%): повышенная надежность
     - H (High - 30%): максимальная надежность
   - **Cycle transmission**: циклическая передача (повторять с начала после последнего куска)
4. Нажмите "Start / Restart" для начала передачи
5. Используйте кнопки управления:
   - **Start / Restart**: начать новую передачу или перезапустить с новыми параметрами
   - **Pause/Resume**: приостановить или возобновить автоматическую смену кодов
   - **Previous/Next**: переключаться между кусками вручную

## Структура данных в QR-коде

Каждый QR-код содержит JSON-объект.

**Первый пакет (index: 0):**
```json
{
  "index": 0,
  "total": 10,
  "crc32": "a1b2c3d4",
  "data": "base64EncodedData..."
}
```

**Остальные пакеты:**
```json
{
  "index": 1,
  "total": 10,
  "data": "base64EncodedData..."
}
```

- `index`: номер текущего куска (начинается с 0)
- `total`: общее количество кусков
- `crc32`: контрольная сумма CRC32 всего файла (только в первом пакете)
- `data`: данные куска в формате base64

## Валидация целостности файла

Приложение автоматически вычисляет CRC32 контрольную сумму всего файла при загрузке. Эта контрольная сумма:
- Отображается в информации о файле
- Передается в метаданных первого пакета
- Может быть использована принимающим приложением для проверки корректности полученного файла

После получения всех пакетов принимающее приложение должно:
1. Собрать все данные из пакетов в правильном порядке
2. Вычислить CRC32 полученного файла
3. Сравнить с CRC32 из первого пакета
4. Если контрольные суммы совпадают - файл передан корректно

## Рекомендации

- Для больших файлов уменьшите chunk size, чтобы QR-коды успешно генерировались
- Увеличьте display interval, если принимающее устройство не успевает считывать коды
- Используйте уровень коррекции L для максимальной емкости данных (меньше кусков)
- Используйте уровень коррекции H/Q для повышенной надежности в условиях плохого освещения или качества камеры
- Отключите циклическую передачу, если хотите передать файл один раз и остановиться
- Вы можете изменить любые параметры во время передачи и нажать "Start / Restart" для применения новых настроек
